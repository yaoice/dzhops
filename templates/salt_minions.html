{% extends "base.html" %}
{% block title %}Add Minion node-OpsMaster自动化运维平台{% endblock %}
{% block nav %}
<!--    <li><a href="{% url 'index' %}"><i class="glyphicon glyphicon-dashboard"></i> 仪表盘</a></li> -->
    <li><a href="{% url 'asset_list' %}"><i class="glyphicon glyphicon-th-list"></i> Host List</a></li>
    <li class="active"><a href="{% url 'openstack_deploy' %}"><i class="glyphicon glyphicon-th-large"></i> OpenStack Deploy<span class="sr-only">(current)</span></a></li>
<!--   <li><a href="{% url 'repair_data' %}"><i class="glyphicon glyphicon-repeat"></i> 数据修复</a></li> -->
    <li><a href="{% url 'keys_show' %}"><i class="glyphicon glyphicon-tags"></i> Minion Keys</a></li>
    <li><a href="{% url 'record_list' %}"><i class="glyphicon glyphicon-floppy-disk"></i> Operation Record</a></li>
{% endblock %}
{% block content %}
    <h5 class="page-header">
        <ol class="breadcrumb">
        	<li class="active">Add Minion</li>
            <li><a href="{% url 'openstack_deploy' %}">OpenStack Setup</a></li>
            <li><a href="{% url 'deploy' %}">Module Deploy</a></li>
            <li><a href="{% url 'update' %}">Configuration Update</a></li>
            <li><a href="{% url 'routine' %}">Routine Update</a></li>
            <li><a href="{% url 'execute' %}">Remote Operation</a></li>
        </ol>
    </h5>
    <div class="row">
        <form class="form-horizontal form-border" id="addminionForm" method="post" enctype="multipart/form-data" action="{% url 'add_minion' %}">
        	{% csrf_token %}
            <div class="col-sm-10 col-sm-offset-1">
                <div class="panel panel-default">
                    <div class="panel-body">
                        <div class="form-group">
                            <label class="col-sm-2 control-label">minion node</label>
                            <div class="col-sm-10">
<!--                              <input type="text" class="form-control" placeholder="请输入salt minion节点，多个请用逗号‘，’隔开" name="minions" > -->
                                <!-- Multiple Checkboxes -->
                        		{% if minions_list %}
                        			{% for minion in minions_list %}
                        				<label class="col-sm-10 checkbox">
                        					<input name='minions_ip' type="checkbox" value="{{ minion }}">
                        					{{ minion }}
                        				</label>
                        			{% endfor %}
                        		{% else %}
                        		<input type="text" class="form-control" placeholder="none minions have been found" disabled='disabled'>
                        		{% endif %}
                            </div>
                        </div>
                        <div class='form-group' style="display: none">
                        	<label class="col-sm-2 control-label">master节点</label>
                        	<div class="col-sm-10">
                        		 <input type="text" class="form-control" placeholder="请输入salt master节点" name="master" >
                        	</div>
                        </div> 
                   
                         <div class='form-group'>
                        	<label class="col-sm-2 control-label">ssh username</label>
                        	<div class="col-sm-10">
                        		 <input type="text" class="form-control" name="username">
                        	</div>
                        </div>
                        <div class='form-group'>
                          	<label class="col-sm-2 control-label">ssh password</label>
                        	<div class="col-sm-10">
                        		 <input type="password" class="form-control" name="password">
                        	</div>
                        </div>
                        <div class='form-group'>
                          	<label class="col-sm-2 control-label">yum repo url</label>
                        	<div class="col-sm-10">
                        		 <input type="text" class="form-control" placeholder="format：http://<ip>:8686/repo_liberty" name="yum_url">
                        	</div>
                        </div>
                        <div class='form-group'>
                          	<label class="col-sm-2 control-label">pip repo url</label>
                        	<div class="col-sm-10">
                        		 <input type="text" class="form-control" placeholder="format：http://<ip>:8686/repo_liberty/pypi/simple" name="pip_url">
                        	</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group">
                 <div class="col-sm-offset-9 col-sm-1">
                    <button type="button" class="btn btn-primary" onclick="isAddOk()" id="execapi">Add</button>
                   <!--  <input type="submit" class="btn btn-primary" value="添加"> -->
                 </div>
            </div>
            <div class="col-sm-10 col-sm-offset-1" id="result">
            </div>
        </form>
    </div>
   <!--row end-->

{% endblock %}
